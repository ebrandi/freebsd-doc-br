<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!--
  The FreeBSD Documentation Project
  The FreeBSD Brazilian Portuguese Documentation Project

  Original revision: r39544

  $FreeBSD$
-->

<chapter id="l10n">
  <chapterinfo>
    <authorgroup>
      <author>
	<firstname>Andrey</firstname>
	<surname>Chernov</surname>
	<contrib>Uma Contribuição de </contrib>
      </author>
    </authorgroup>
    <authorgroup>
      <author>
	<firstname>Michael C.</firstname>
	<surname>Wu</surname>
	<contrib>Reescrito por </contrib>
      </author>
      <!-- 30 Nv 2000 -->
    </authorgroup>
  </chapterinfo>

  <title>Localização - Utilização e Configuração de I18N/L10N</title>

  <sect1 id="l10n-synopsis">
    <title>Sinopse</title>

    <para>O projeto &os; é um projeto muito distribuído, com usuários e
       colaboradores localizados em diferentes partes do mundo. Este 
       capítulo discute os recursos de internacionalização e localização do &os;
       que permitem aos usuários que não falam/leem/escrevem Inglês a 
       realizar seus trabalhos. Existem muitos aspectos da implementação 
       ligados a i18n, tanto a níveis de sistema quanto a níveis de 
       aplicação, de modo que serão fornecidas a você outras fontes 
       mais específicas de documentação.</para>


    <para>Após ler este capítulo, você saberá:</para>
    <itemizedlist>
      <listitem><para>Como diferentes idiomas e caracteres/formatos 
      específicos (<literal>Locales</literal>) de diferentes países
      são codificados nos sistemas operacionais modernos.</para></listitem>
      <listitem><para>Como configurar os locales para seu 
      shell.</para></listitem>
      <listitem><para>Como configurar seu console para idiomas 
      diferentes do idioma Inglês.</para></listitem>
      <listitem><para>Como utilizado o X Window System de forma efetiva
      com outros idiomas.</para></listitem>
      <listitem><para>Onde achar mais informações sobre como escrever
      aplicações que trabalhem com i18n.</para></listitem>
   </itemizedlist>

    <para>Antes de ler este capítulo, você deveria saber:</para>

    <itemizedlist>
      <listitem><para>Como instalar aplicações de terceiros 
        no &os; (<xref linkend="ports"/>).</para></listitem>
    </itemizedlist>
  </sect1>

  <sect1 id="l10n-basics">
    <title>O Básico</title>

    <sect2>
      <title>O que é I18N/L10N?</title>
    <indexterm>
      <primary>internationalization</primary>
      <see>localization</see>
    </indexterm>
    <indexterm><primary>localization</primary></indexterm>

      <para>Desenvolvedores encurtaram o termo em Inglês 
	<quote>internationalization</quote> para I18N, indicando, 
	com o número aí presente, a quantidade de caracteres entre 
	a primeira e a última letra. L10N utiliza o mesmo esquema 
	de nomenclatura, vindo do termo <quote>localization</quote>. 
	Juntos, na forma I18N/L10N, estabelecem métodos, protocolos 
	e aplicativos que permitem aos usuários utilizem idiomas 
	de sua escolha.</para>

      <para>Aplicações I18N são desenvolvidas com ajuda de kits I18N 
	e bibliotecas. Eles permitem que os desenvolvedores escrevam 
	um arquivo simples e possam ter menus e textos traduzidos sendo 
	exibidos em cada idioma que esteja sendo suportado. É 
	altamente incentivado que desenvolvedores sigam essa 
	convenção.</para>
    </sect2>

    <sect2>
      <title>Por que eu deveria utilizar I18N/L10N?</title>

      <para>I18N/L10N é utilizado onde quer que você deseje ver, 
	processar ou digitar dados e caracteres que não estejam 
	presentes no idioma Inglês.</para>
    </sect2>

    <sect2>
      <title>Quais idiomas são suportados por I18N?</title>

      <para>I18N e L10N não são específicos do &os;. 
	Atualmente você pode escolher e utilizar os principais 
	idiomas do mundo, incluindo, mas não limitando-se a: 
	Alemão, Chinês, Coreano, Francês, Japonês, Russo, 
	Vietnamita e vários outros.</para>
    </sect2>
  </sect1>

  <sect1 id="using-localization">
    <title>Utilizando Convenções de Localização</title>

    <!-- XXX: Localization (L10N) != Internationalization (I18N). 
	 Was this section written with some kind of typo? Here 
	 I saw references to I18N but not to L10N. Now I've
	 changed it from i18n to l10n. / egypcio -->

    <para>Mesmo com todo seu esplendor, L10N não é algo específico 
      utilizado no &os;, mas sim uma convensão. É encorajado que 
      você ajude o projeto &os; a continuar seguindo esta 
      convensão.</para>

    <indexterm><primary>locale</primary></indexterm>

    <para>Configurações de localização são baseadas em três termos 
      principais: Código do Idioma, Código do País e Codificação.
      Os nomes dos <literal>locales</literal> se formam com base 
      nesses termos da seguinte forma:</para>

    <programlisting><replaceable>CódigoIdioma</replaceable>_<replaceable>CódigoPaís</replaceable>.<replaceable>Codificação</replaceable></programlisting>

    <sect2>
      <title>Códigos do Idioma e País</title>
      <indexterm><primary>language codes</primary></indexterm>
      <indexterm><primary>country codes</primary></indexterm>

      <para>Para fazer com que um sistema &os;, ou qualquer outro 
	sistema &unix; que suporte I18N/L10N, compreenda caracteres 
	específicos de um determinado idioma (ou país), os usuários 
	precisam descobrir qual código utilizar. Esses códigos 
	dirão para as aplicações quais variações de caracteres e 
	codificações devem utilizar. Além disso, navegadores, 
	servidores de e-mail, servidores web e diversos outros 
	serviços tomarão decisões baseando-se nesses códigos 
	(<literal>locales</literal>). Veja alguns exemplos de 
	códigos de idiomas/países:</para>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="2">
	  <thead>
	    <row>
	      <entry>Código do Idioma/País</entry>
	      <entry>Descrição</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry>en_US</entry>
	      <entry>Inglês - Estados Unidos da América</entry>
	    </row>

	    <row>
	      <entry>ru_RU</entry>
	      <entry>Russo - Rússia</entry>
	    </row>

	    <row>
	      <entry>zh_TW</entry>
	      <entry>Chinês (Tradicional) - Taiwan</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

    </sect2>

    <sect2>
      <title>Codificação</title>
      <indexterm><primary>encodings</primary></indexterm>
      <indexterm><primary>ASCII</primary></indexterm>

      <para>Alguns idiomas utilizam codificações diferentes da 
	codificação do padrão ASCII; com 8 bits, com caracteres 
	mais espaçosos (<literal>wide</literal>), ou com número 
	variado de bytes (<literal>multibyte</literal>). Veja a 
	página de manual &man.multibyte.3; para obter mais detalhes a 
	respeito desse assunto. Aplicativos mais antigos não reconhecem 
	ou confundem esses idiomas, utilizando caracteres de controle 
	ao invés dos caracteres corretos. Aplicações mais recentes 
	geralmente não reconhecem os caracteres de 8 bits. Dependendo 
	da implementação, os usuários podem precisar compilar um aplicativo 
	para que ele suporte caracteres wide ou multibyte, ou precisarão 
	configurá-lo corretamente. Para ser capaz de compreender esses 
	caracteres wide ou multibyte, a 
	<ulink url="&url.base;/ports/index.html">Coleção de Ports do &os;</ulink> 
	oferece diversos aplicativos em diferentes idiomas. Consulte a 
	documentação fornecida para I18N nos respectivos ports.</para>

      <para>Especificamente, o usuário precisa consultar a documentação 
	fornecida junto com a aplicação para decidir sobre como 
	configurá-la corretamente ou quais valores corretos deve passar 
	para o compilador, para scripts de configuração ou, ainda, se 
	deve alterar algo no <filename>Makefile</filename>.</para>

      <para>Algumas coisas para se ter em mente são:</para>

      <itemizedlist>
	<listitem>
	  <para>Ao se utilizar uma linguagem específica, como C, 
	  define-se o conjunto de caracteres que podem ser utilizados 
	  (veja &man.multibyte.3;); ISO8859-1, ISO8859-15, 
	  KOI8-R ou CP437.</para>
	</listitem>

	<listitem>
	  <para>Codificações do tipo <literal>wide</literal> ou 
	  <literal>multibyte<literal>: EUC ou Big5.</para>
	</listitem>
      </itemizedlist>

      <para>Você pode checar a lista atual de conjuntos de caracteres nos
	<ulink
	url="http://www.iana.org/assignments/character-sets">Registros da IANA</ulink>.</para>

      <note>
	<para>O &os;, por outro lado, faz uso de convenções compatíveis com X11.</para>
      </note>

    </sect2>

    <sect2>
      <title>Aplicações I18N</title>

      <para>Na Coleção de Ports do &os;, aplicações I18N
	foram nomeadas com o sufixo <literal>-i18n</ literal> para
	fácil identificação. Entretanto, elas nem sempre suportam o
	idioma desejado.</para>
    </sect2>

    <sect2 id="setting-locale">
      <title>Definindo o Locale</title>

      <para>Geralmente é o suficiente exportar o valor da localidade 
	desejada na variável de ambiente <envar>LANG</envar> na shell 
	de login. Isto pode ser feito no arquivo 
	<filename>~/.login_conf</filename> ou no arquivo de 
	inicialização do shell do usuário (<filename>~/.profile</filename>, 
	<filename>~/.bashrc</filename>, <filename>~/.cshrc</filename> 
	ou outro arquivo, dependendo da shell utilizada). Não há 
	necessidade de definir os subconjuntos de locale, como 
	<envar>LC_CTYPE</envar>, <envar>LC_CTIME</envar>. Por favor, 
	consulte a documentação do idioma específico para mais 
	informações.</para>

      <para>Você deve definir as seguintes variáveis ​​de ambiente 
	em seus arquivos de configuração:</para>

      <itemizedlist>
        <indexterm><primary>POSIX</primary></indexterm>
        <listitem>
	  <para><envar>LANG</envar> para funções &man.setlocale.3; da 
	    família &posix;</para>
	</listitem>

	<listitem>
	  <indexterm><primary>MIME</primary></indexterm>

	  <para><envar>MM_CHARSET</envar> para conjuntos de caractedes 
	    das aplicações MIME</para>
	</listitem>
      </itemizedlist>

      <para>Isso inclui as configurações de shell do usuário, configurações 
	específicas de uma aplicação e configurações do ambiente X11.</para>

      <sect3>
	<title>Definição de Métodos</title>
        <indexterm><primary>locale</primary></indexterm>
        <indexterm><primary>login class</primary></indexterm>

	<para>Existem dois métodos para definir localização e ambos são 
	    descritos logo abaixo. O primeiro (e mais recomendado) é o 
	    método que faz uso das variáveis de ambiente definidas na 
	    <link linkend="login-class">classe de login</link>, o 
	    segundo define as variáveis no 
	    <link linkend="startup-file">arquivo de iniciação</link> 
	    do shell de sistema</para>

	<sect4 id="login-class">
	  <title>Método das Classes de Login</title>

	  <para>Este método permite o uso de variáveis de ambiente 
	    pelas configurações de localização e conjunto de caracteres 
	    MIME pelas shells presentes no sistema sem a necessidade 
	    de se ter um arquivo de inicialização específico com 
	    configurações para cada uma dessas shells. Um 
	    <link linkend="usr-setup">setup a nível de usuário</link> 
	    pode ser feito pelo próprio usuário sem necessiades de 
	    privilégios de super usuário (root), diferente de um 
	    <link linkend="adm-setup">setup a nível de administrador</link>.</para>

	  <sect5 id="usr-setup">
	    <title>Setup a Nível de Usuário</title>

	    <para>Aqui está um pequeno exemplo do conteúdo configurado 
	    no arquivo <filename>.login_conf</filename>, presente no 
	    diretório home de um usuário qualquer, que define ambas 
	    as variáveis para utilizar codificações tipo Latin-1:</para>

	    <programlisting>me:\
	:charset=ISO-8859-1:\
	:lang=de_DE.ISO8859-1:</programlisting>

	    <indexterm><primary>Traditional Chinese</primary><secondary>BIG-5 encoding</secondary></indexterm>

	    <para>Aqui está um pequeno exemplo do conteúdo configurado 
	    no arquivo <filename>.login_conf</filename>, presente no 
	    diretório home de um usuário qualquer, que define 
	    variáveis para utilizar codificações tipo BIG-5. Perceba 
	    que muitas outras variáveis são utilizadas pelo fato de 
	    que alguns softwares não respeitam os padrões de 
	    localização corretamente para o uso de idiomas como 
	    Chinês, Japonês e Coreano.</para>

	    <programlisting># Users who do not wish to use monetary units or time formats
# of Taiwan can manually change each variable
me:\
	:lang=zh_TW.Big5:\
	:setenv=LC_ALL=zh_TW.Big5:\
	:setenv=LC_COLLATE=zh_TW.Big5:\
	:setenv=LC_CTYPE=zh_TW.Big5:\
	:setenv=LC_MESSAGES=zh_TW.Big5:\
	:setenv=LC_MONETARY=zh_TW.Big5:\
	:setenv=LC_NUMERIC=zh_TW.Big5:\
	:setenv=LC_TIME=zh_TW.Big5:\
	:charset=big5:\
	:xmodifiers="@im=gcin": # Define gcin como XIM Input Server</programlisting>

	    <para>Consulte o <link linkend="adm-setup">Setup a Nível de 
	    Administrador</link> e a página de manual &man.login.conf.5; 
	    para obter mais detalhes.</para>
	  </sect5>

	  <sect5 id="adm-setup">
	    <title>Setup a Nível de Administrador</title>

	    <para>Verifique se as configurações na Classe de Login 
	      do usuário apresentam definições para o idioma desejado. 
	      Confirme se, no arquivo <filename>/etc/login.conf</filename>, 
	      você tem as seguintes configurações:</para>

	    <programlisting><replaceable>nome_do_idioma</replaceable>|<replaceable>Descrição do Tipo da Conta</replaceable>:\
	:charset=<replaceable>definição_de_charset_MIME</replaceable>:\
	:lang=<replaceable>nome_da_localização</replaceable>:\
	:tc=default:</programlisting>

	    <para>Então, ainda utilizando um exemplo anterios, para 
		Latin-1, suas configurações seriam parecidas com estas:</para>

	    <programlisting>alemao|Contas de Usuarios Alemaes:\
	:charset=ISO-8859-1:\
	:lang=de_DE.ISO8859-1:\
	:tc=default:</programlisting>

	    <para>Antes de alterar as Classes de Login dos usuários execute o seguinte comando:</para>

	    <screen>&prompt.root; <userinput>cap_mkdb /etc/login.conf</userinput></screen>

	    <para>Assim você fará as alterações realizadas em
	      <filename>/etc/login.conf</filename> visiveis para todo o sistema.</para>

	    <bridgehead renderas="sect4">Changing Login Classes with &man.vipw.8;</bridgehead>

	    <indexterm>
        <primary><command>vipw</command></primary>
      </indexterm>
	    <para>Use <command>vipw</command> to add new users, and make
	      the entry look like this:</para>

	    <programlisting>user:password:1111:11:<replaceable>language</replaceable>:0:0:User Name:/home/user:/bin/sh</programlisting>

	    <bridgehead renderas="sect4">Changing Login Classes with &man.adduser.8;</bridgehead>

	    <indexterm>
        <primary><command>adduser</command></primary>
      </indexterm>
	    <indexterm><primary>login class</primary></indexterm>
	    <para>Use <command>adduser</command> to add new users, and do
	      the following:</para>

	    <itemizedlist>
	      <listitem>
		<para>Set <literal>defaultclass =
		  <replaceable>language</replaceable></literal> in
		  <filename>/etc/adduser.conf</filename>.  Keep in mind
		  you must enter a <literal>default</literal> class for
		  all users of other languages in this case.</para>
	      </listitem>

	      <listitem>
		<para>An alternative variant is answering the specified
		  language each time that
<screen><prompt>Enter login class: default []: </prompt></screen>
		  appears from &man.adduser.8;.</para>
	      </listitem>

	      <listitem>
		<para>Another alternative is to use the following for each
		  user of a different language that you wish to
		  add:</para>

		<screen>&prompt.root; <userinput>adduser -class <replaceable>language</replaceable></userinput></screen>
	      </listitem>
	    </itemizedlist>

	    <bridgehead renderas="sect4">Changing Login Classes with &man.pw.8;</bridgehead>
	    <indexterm>
        <primary><command>pw</command></primary>
      </indexterm>
	    <para>If you use &man.pw.8; for adding new users, call it in
	      this form:</para>

	    <screen>&prompt.root; <userinput>pw useradd <replaceable>user_name</replaceable> -L <replaceable>language</replaceable></userinput></screen>
	  </sect5>
	</sect4>

	<sect4 id="startup-file">
	  <title>Shell Startup File Method</title>

	  <note>
	    <para>This method is not recommended because it requires a
	      different setup for each possible shell program chosen.  Use
	      the <link linkend="login-class">Login Class Method</link>
	      instead.</para>
	  </note>

	  <indexterm><primary>MIME</primary></indexterm>
	  <indexterm><primary>locale</primary></indexterm>
	  <para>To add the locale name and MIME character set, just set
	    the two environment variables shown below in the
	    <filename>/etc/profile</filename> and/or
	    <filename>/etc/csh.login</filename> shell startup files.  We
	    will use the German language as an example below:</para>

	  <para>In <filename>/etc/profile</filename>:</para>

	  <programlisting><envar>LANG=de_DE.ISO8859-1; export LANG</envar>
<envar>MM_CHARSET=ISO-8859-1; export MM_CHARSET</envar></programlisting>

	  <para>Or in <filename>/etc/csh.login</filename>:</para>

	  <programlisting><envar>setenv LANG de_DE.ISO8859-1</envar>
<envar>setenv MM_CHARSET ISO-8859-1</envar></programlisting>

	  <para>Alternatively, you can add the above instructions to
	    <filename>/usr/share/skel/dot.profile</filename> (similar to
	    what was used in <filename>/etc/profile</filename> above), or
	    <filename>/usr/share/skel/dot.login</filename> (similar to
	    what was used in <filename>/etc/csh.login</filename>
	    above).</para>

	  <para>For X11:</para>

	  <para>In <filename>$HOME/.xinitrc</filename>:</para>

	  <programlisting><envar>LANG=de_DE.ISO8859-1; export LANG</envar></programlisting>

	  <para>Or:</para>

	  <programlisting><envar>setenv LANG de_DE.ISO8859-1</envar></programlisting>

	  <para>Depending on your shell (see above).</para>

	</sect4>
      </sect3>
    </sect2>

    <sect2 id="setting-console">
      <title>Console Setup</title>

      <para>For all single C chars character sets, set the correct
	console fonts in <filename>/etc/rc.conf</filename> for the
	language in question with:</para>

      <programlisting>font8x16=<replaceable>font_name</replaceable>
font8x14=<replaceable>font_name</replaceable>
font8x8=<replaceable>font_name</replaceable></programlisting>

      <para>The <replaceable>font_name</replaceable> here is taken from
        the <filename>/usr/share/syscons/fonts</filename> directory,
	without the <filename>.fnt</filename> suffix.</para>

      <indexterm>
        <primary><application>sysinstall</application></primary>
      </indexterm>
      <indexterm><primary>keymap</primary></indexterm>
      <indexterm><primary>screenmap</primary></indexterm>
      <para>If required, set the keymap and screenmap for your
	single C chars character set through
	<command>sysinstall</command>.
	Once inside <application>sysinstall</application>, choose <guimenuitem>Configure</guimenuitem>, then
	<guimenuitem>Console</guimenuitem>.  Alternatively, you can add the
	following to <filename>/etc/rc.conf</filename>:</para>

      <programlisting>scrnmap=<replaceable>screenmap_name</replaceable>
keymap=<replaceable>keymap_name</replaceable>
keychange="<replaceable>fkey_number sequence</replaceable>"</programlisting>

      <para>The <replaceable>screenmap_name</replaceable> here is taken
        from the <filename>/usr/share/syscons/scrnmaps</filename>
	directory, without the <filename>.scm</filename> suffix.  A
	screenmap with a corresponding mapped font is usually needed as a
	workaround for expanding bit 8 to bit 9 on a VGA adapter's font
	character matrix in pseudographics area, i.e., to move letters out
	of that area if screen font uses a bit 8 column.</para>

      <para>If you have the <application>moused</application> daemon
	enabled by setting the following
	in your <filename>/etc/rc.conf</filename>:</para>

<programlisting>moused_enable="YES"</programlisting>

      <para>then examine the mouse cursor information in the next
	paragraph.</para>

      <indexterm>
        <primary><application>moused</application></primary>
      </indexterm>
      <para>By default the mouse cursor of the &man.syscons.4; driver occupies the
	0xd0-0xd3 range in the character set.  If your language uses this
	range, you need to move the cursor's range outside of it.  To enable
	the workaround for &os;, add the following line to
	<filename>/etc/rc.conf</filename>:</para>

      <programlisting>mousechar_start=3</programlisting>

      <para>The <replaceable>keymap_name</replaceable> here is taken from
        the <filename>/usr/share/syscons/keymaps</filename> directory,
	without the <filename>.kbd</filename> suffix.  If you are
	uncertain which keymap to use, you use can &man.kbdmap.1; to test
	keymaps without rebooting.</para>

      <para>The <literal>keychange</literal> is usually needed to program
        function keys to match the selected terminal type because
	function key sequences cannot be defined in the key map.</para>

      <para>Also be sure to set the correct console terminal type in
        <filename>/etc/ttys</filename> for all <literal>ttyv*</literal>
	entries.  Current pre-defined correspondences are:</para>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="2">
	  <thead>
	    <row>
	      <entry>Character Set</entry>
	      <entry>Terminal Type</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry>ISO8859-1 or ISO8859-15</entry>
	      <entry><literal>cons25l1</literal></entry>
	    </row>

	    <row>
	      <entry>ISO8859-2</entry>
	      <entry><literal>cons25l2</literal></entry>
	    </row>

	    <row>
	      <entry>ISO8859-7</entry>
	      <entry><literal>cons25l7</literal></entry>
	    </row>

	    <row>
	      <entry>KOI8-R</entry>
	      <entry><literal>cons25r</literal></entry>
	    </row>

	    <row>
	      <entry>KOI8-U</entry>
	      <entry><literal>cons25u</literal></entry>
	    </row>

	    <row>
	      <entry>CP437 (VGA default)</entry>
	      <entry><literal>cons25</literal></entry>
	    </row>

	    <row>
	      <entry>US-ASCII</entry>
	      <entry><literal>cons25w</literal></entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <para>For wide or multibyte characters languages, use the correct
	FreeBSD port in your
	<filename>/usr/ports/<replaceable>language</replaceable></filename>
	directory.  Some ports appear as console while the system sees it
	as serial vtty's, hence you must reserve enough vtty's for both
	X11 and the pseudo-serial console.  Here is a partial list of
	applications for using other languages in console:</para>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="2">
	  <thead>
	    <row>
	      <entry>Language</entry>
	      <entry>Location</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry>Traditional Chinese (BIG-5)</entry>
	      <entry><filename role="package">chinese/big5con</filename></entry>
	    </row>

	    <row>
	      <entry>Japanese</entry>
	      <entry><filename role="package">japanese/kon2-16dot</filename> or
	        <filename role="package">japanese/mule-freewnn</filename></entry>
	    </row>

	    <row>
	      <entry>Korean</entry>
	      <entry><filename role="package">korean/han</filename></entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>
    </sect2>

    <sect2>
      <title>X11 Setup</title>

      <para>Although X11 is not part of the FreeBSD Project, we have
	included some information here for FreeBSD users.  For more
	details, refer to the <ulink
	url="http://www.x.org/">&xorg;
	web site</ulink> or whichever X11 Server you use.</para>

      <para>In <filename>~/.Xresources</filename>, you can additionally
	tune application specific I18N settings (e.g., fonts, menus,
	etc.).</para>

      <sect3>
	<title>Displaying Fonts</title>
	<indexterm><primary>X11 True Type font server</primary></indexterm>
	<para>Install <application>&xorg;</application> server
	  (<filename role="package">x11-servers/xorg-server</filename>),
	  then install the language &truetype; fonts.  Setting the correct
	  locale should allow you to view your selected language in menus
	  and such.</para>
      </sect3>

      <sect3>
	<title>Inputting Non-English Characters</title>
	<indexterm><primary>X11 Input Method (XIM)</primary></indexterm>
	<para>The X11 Input Method (XIM) Protocol is a new standard for
	  all X11 clients.  All X11 applications should be written as XIM
	  clients that take input from XIM Input servers.  There are
	  several XIM servers available for different languages.</para>
      </sect3>
    </sect2>

    <sect2>
      <title>Printer Setup</title>

      <para>Some single C chars character sets are usually hardware
	coded into printers. Wide or multibyte
	character sets require special setup and we recommend using
	<application>apsfilter</application>.  You may also convert the
	document to &postscript; or PDF formats using language specific
	converters.</para>
    </sect2>

    <sect2>
      <title>Kernel and File Systems</title>

      <para>The FreeBSD fast filesystem (FFS) is 8-bit clean, so it can be used
	with any single C chars character set (see &man.multibyte.3;),
	but there is no character set
	name stored in the filesystem; i.e., it is raw 8-bit and does not
	know anything about encoding order.  Officially, FFS does not
	support any form of wide or multibyte character sets yet.  However, some
	wide or multibyte character sets have independent patches for FFS
	enabling such support.  They are only temporary unportable
	solutions or hacks and we have decided to not include them in the
	source tree.  Refer to respective languages' web sites for more
	information and the patch files.</para>

      <indexterm><primary>DOS</primary></indexterm>
      <indexterm><primary>Unicode</primary></indexterm>
      <para>The FreeBSD &ms-dos; filesystem has the configurable ability to
	convert between &ms-dos;, Unicode character sets and chosen
	FreeBSD filesystem character sets.  See &man.mount.msdosfs.8; for
	details.</para>
    </sect2>
  </sect1>

  <sect1 id="l10n-compiling">
    <title>Compiling I18N Programs</title>

    <para>Many FreeBSD Ports have been ported with I18N support.  Some
      of them are marked with -I18N in the port name.  These and many
      other programs have built in support for I18N and need no special
      consideration.</para>

    <indexterm>
      <primary><application>MySQL</application></primary>
    </indexterm>
    <para>However, some applications such as
      <application>MySQL</application> need to have their
      <filename>Makefile</filename> configured with the specific
      charset.  This is usually done in the
      <filename>Makefile</filename> or done by passing a value to
      <application>configure</application> in the source.</para>
  </sect1>

  <sect1 id="lang-setup">
    <title>Localizing FreeBSD to Specific Languages</title>

    <sect2 id="ru-localize">
      <sect2info>
	<authorgroup>
	  <author>
	    <firstname>Andrey</firstname>
	    <surname>Chernov</surname>
	    <contrib>Originally contributed by </contrib>
	  </author>
	</authorgroup>
      </sect2info>
      <title>Russian Language (KOI8-R Encoding)</title>
      <indexterm>
	<primary>localization</primary>
	<secondary>Russian</secondary>
      </indexterm>

      <para>For more information about KOI8-R encoding, see the <ulink
	url="http://koi8.pp.ru/">KOI8-R References
	(Russian Net Character Set)</ulink>.</para>

      <sect3>
	<title>Locale Setup</title>

	<para>Put the following lines into your
	  <filename>~/.login_conf</filename> file:</para>

	<programlisting>me:My Account:\
	:charset=KOI8-R:\
	:lang=ru_RU.KOI8-R:</programlisting>

	<para>See earlier in this chapter for examples of setting up the
	  <link linkend="setting-locale">locale</link>.</para>
      </sect3>

      <sect3>
	<title>Console Setup</title>

	<itemizedlist>
	  <listitem>
	    <para>Add the following line
	      to your <filename>/etc/rc.conf</filename> file:</para>

	    <programlisting>mousechar_start=3</programlisting>
	  </listitem>

	  <listitem>
	    <para>Also, use following settings in
	      <filename>/etc/rc.conf</filename>:</para>

	    <programlisting>keymap="ru.koi8-r"
scrnmap="koi8-r2cp866"
font8x16="cp866b-8x16"
font8x14="cp866-8x14"
font8x8="cp866-8x8"</programlisting>

	  </listitem>

	  <listitem>
	    <para>For each <literal>ttyv*</literal> entry in
	      <filename>/etc/ttys</filename>, use
	      <literal>cons25r</literal> as the terminal type.</para>
	  </listitem>
	</itemizedlist>

	<para>See earlier in this chapter for examples of setting up the
	  <link linkend="setting-console">console</link>.</para>
      </sect3>

      <sect3>
	<title>Printer Setup</title>
	<indexterm><primary>printers</primary></indexterm>
	<para>Since most printers with Russian characters come with
	  hardware code page CP866, a special output filter is needed
	  to convert from KOI8-R to CP866.  Such a filter is installed by
	  default as <filename>/usr/libexec/lpr/ru/koi2alt</filename>.
	  A Russian printer <filename>/etc/printcap</filename> entry
	  should look like:</para>

	<programlisting>lp|Russian local line printer:\
	:sh:of=/usr/libexec/lpr/ru/koi2alt:\
	:lp=/dev/lpt0:sd=/var/spool/output/lpd:lf=/var/log/lpd-errs:</programlisting>

	<para>See &man.printcap.5; for a detailed description.</para>
      </sect3>

      <sect3>
	<title>&ms-dos; FS and Russian Filenames</title>

	<para>The following example &man.fstab.5; entry enables support
	  for Russian filenames in mounted &ms-dos; filesystems:</para>

	<programlisting>/dev/ad0s2      /dos/c  msdos   rw,-Wkoi2dos,-Lru_RU.KOI8-R 0 0</programlisting>

	<para>The option <option>-L</option> selects the locale name
	  used, and <option>-W</option> sets the character conversion
	  table.  To use the <option>-W</option> option, be sure to
	  mount <filename>/usr</filename> before the &ms-dos; partition
	  because the conversion tables are located in
	  <filename>/usr/libdata/msdosfs</filename>.  For more
	  information, see the &man.mount.msdosfs.8; manual
	  page.</para>
      </sect3>

      <sect3>
	<title>X11 Setup</title>

	<orderedlist>
	  <listitem>
	    <para>Do <link linkend="setting-locale">non-X locale
	      setup</link> first as described.</para>
	  </listitem>

	  <listitem>
	    <para>If you use <application>&xorg;</application>,
	    install
	    <filename role="package">x11-fonts/xorg-fonts-cyrillic</filename>
	    package.</para>

	    <para>Check the <literal>"Files"</literal> section
	      in your <filename>/etc/X11/xorg.conf</filename> file.
	      The following
	      line must be added <emphasis>before</emphasis> any other
	      <literal>FontPath</literal> entries:</para>

	    <programlisting>FontPath   "/usr/local/lib/X11/fonts/cyrillic"</programlisting>

	    <note>
	      <para>See ports for more cyrillic fonts.</para></note>
	  </listitem>

	  <listitem>
	    <para>To activate a Russian keyboard, add the following to the
	      <literal>"Keyboard"</literal> section of your
	      <filename>xorg.conf</filename> file:</para>

	    <programlisting>Option "XkbLayout"   "us,ru"
Option "XkbOptions"  "grp:toggle"</programlisting>

	    <para>Also make sure that <literal>XkbDisable</literal> is
	      turned off (commented out) there.</para>

	    <para>For <literal>grp:toggle</literal>
	      the RUS/LAT switch will be <keycap>Right Alt</keycap>,
	      for <literal>grp:ctrl_shift_toggle</literal> switch will be
	      <keycombo action="simul"><keycap>Ctrl</keycap><keycap>Shift</keycap></keycombo>.
	      For <literal>grp:caps_toggle</literal>
	    the RUS/LAT switch will be <keycap>CapsLock</keycap>.
	    The old <keycap>CapsLock</keycap> function is still
	    available via <keycombo action="simul"><keycap>Shift</keycap><keycap>CapsLock</keycap></keycombo> (in LAT mode
	      only).
	    <literal>grp:caps_toggle</literal> does not work in
	    <application>&xorg;</application> for unknown reason.</para>

	    <para>If you have <quote>&windows;</quote> keys on your keyboard,
	      and notice that some non-alphabetical keys are mapped
	      incorrectly in RUS mode, add the following line in your
	      <filename>xorg.conf</filename> file:</para>

	<programlisting>Option "XkbVariant" ",winkeys"</programlisting>

	    <note>
	      <para>The Russian XKB keyboard may not work with non-localized
		applications.</para>
	    </note>
	  </listitem>
	</orderedlist>
	<note>
	  <para>Minimally localized applications
	    should call a <function>XtSetLanguageProc (NULL, NULL,
	    NULL);</function> function early in the program.</para>
	  <para>See <ulink
	    url="http://koi8.pp.ru/xwin.html">
	    KOI8-R for X Window</ulink> for more instructions on
	    localizing X11 applications.</para>
	</note>
      </sect3>
    </sect2>

    <sect2>
      <title>Traditional Chinese Localization for Taiwan</title>
      <indexterm>
	<primary>localization</primary>
	<secondary>Traditional Chinese</secondary>
      </indexterm>
      <para>The FreeBSD-Taiwan Project has an Chinese HOWTO for
	FreeBSD at <ulink url="http://netlab.cse.yzu.edu.tw/~statue/freebsd/zh-tut/"></ulink>
	using many Chinese ports.
	Current editor for the <literal>FreeBSD Chinese HOWTO</literal> is
        Shen Chuan-Hsing <email>statue@freebsd.sinica.edu.tw</email>.
      </para>

      <para>Chuan-Hsing Shen <email>statue@freebsd.sinica.edu.tw</email> has
	created the <ulink url="http://netlab.cse.yzu.edu.tw/~statue/cfc/">
	Chinese FreeBSD Collection (CFC)</ulink> using FreeBSD-Taiwan's
	<literal>zh-L10N-tut</literal>.  The packages and the script files
	are available at <ulink url="ftp://freebsd.csie.nctu.edu.tw/pub/taiwan/CFC/"></ulink>.</para>
    </sect2>

    <sect2>
      <title>German Language Localization (for All ISO 8859-1
	Languages)</title>
      <indexterm>
	<primary>localization</primary>
	<secondary>German</secondary>
      </indexterm>

      <para>Slaven Rezic <email>eserte@cs.tu-berlin.de</email> wrote a
	tutorial on using umlauts on a FreeBSD machine.  The tutorial
	is written in German and is available at
	<ulink url="http://user.cs.tu-berlin.de/~eserte/FreeBSD/doc/umlaute/umlaute.html"></ulink>.</para>
    </sect2>

    <sect2>
      <title>Greek Language Localization</title>

      <indexterm>
	<primary>localization</primary>
	<secondary>Greek</secondary>
      </indexterm>
      <para>Nikos Kokkalis <email>nickkokkalis@gmail.com</email> has written
	a complete article on Greek support in &os;.  It is available as
	part of the official &os; Greek documentation, in <ulink
	  url="&url.doc.base;/el_GR.ISO8859-7/articles/greek-language-support/index.html">http://www.freebsd.org/doc/el_GR.ISO8859-7/articles/greek-language-support/index.html</ulink>.
	Please note this is in Greek <emphasis>only</emphasis>.</para>
    </sect2>

    <sect2>
      <title>Japanese and Korean Language Localization</title>
      <indexterm>
	<primary>localization</primary>
	<secondary>Japanese</secondary>
      </indexterm>
      <indexterm>
	<primary>localization</primary>
	<secondary>Korean</secondary>
      </indexterm>
      <para>For Japanese, refer to
        <ulink url="http://www.jp.FreeBSD.org/"></ulink>,
	and for Korean, refer to
	<ulink url="http://www.kr.FreeBSD.org/"></ulink>.</para>
    </sect2>

    <sect2>
      <title>Documentação do &os; em Outros Idiomas</title>

      <para>Algums colaboradores so projeto &os; traduzem várias das 
	documentações para outros idiomas. Essas traduções estão 
	disponíveis em páginas específicas no <ulink 
	url="&url.base;/index.html">Sítio Web Oficial da Documentação 
	do Projeto &os;</ulink> ou em 
	<filename>/usr/share/doc</filename>.</para>
    </sect2>
  </sect1>
</chapter>
